<app-sidebar></app-sidebar>
<app-notification></app-notification>
<div class="ml-70 bg-[#f5f5f5] flex justify-center items-center min-h-screen">
  <div class="bg-white min-h-screen w-10/12 shadow-sm">
    <div class="relative">
      <img [src]="bg" alt="bg" class="w-full h-40 object-cover brightness-50" />
      <div class="absolute inset-0 flex items-center justify-center bg-black/10">
        <h1 class="text-white text-5xl font-bold drop-shadow-lg font-['Poppins']">Gestion Marketplace</h1>
      </div>
    </div>

    <div class="px-8 py-6 space-y-8">
      <div class="bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden">
        <table class="w-full">
          <thead class="bg-gray-100">
            <tr>
              <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase">Photo</th>
              <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase">Propriétaire</th>
              <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase">Prix</th>
              <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase">Nationalité</th>
              <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase">Actions</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-100">
            <tr *ngFor="let marketplace of marketplaces" class="hover:bg-gray-50 transition-colors">
              <td class="px-6 py-4">
                <div class="group">
                    <img [src]="marketplace.pigeon?.photoUrl || 'assets/bg100.jpg'" alt="Photo" class="w-20 h-20 rounded-md object-cover transition-all duration-500 group-hover:scale-110">
                  </div>
                    </td>
              <td class="px-6 py-4 text-base text-gray-800 font-medium">
                {{ marketplace.pigeon?.colombophile?.nomComplet || 'Propriétaire inconnu' }}
              </td>
              <td class="px-6 py-4 text-sm text-gray-600">{{ marketplace.prix }} DH</td>
              <td class="px-6 py-4 text-base text-gray-600">{{ marketplace.pigeon?.nationalite || 'Non spécifiée' }}</td>
              <td class="px-6 py-4">
                <button 
                  (click)="retirerDuMarketplace(marketplace.id)"
                  class="inline-flex items-center justify-center px-2.5 py-2 w-fit border text-sm font-medium border-red-200 text-red-600 rounded-lg hover:bg-red-50 hover:shadow-sm transition-all duration-200"
                >
                  <svg class="w-3 h-3 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v1a1 1 0 001 1h14a1 1 0 001-1V6a2 2 0 00-2-2h-1V3a1 1 0 00-1-1H6zm-1 3h10V4H5v1zm-2 4v8a2 2 0 002 2h10a2 2 0 002-2V9H3z"/>
                  </svg>
                  Retirer du Marketplace
                </button>
              </td>
            </tr>
            <tr *ngIf="marketplaces.length === 0" class="bg-gray-50">
              <td colspan="5" class="px-6 py-12 text-center">
                <div class="flex flex-col items-center justify-center">
                  <svg class="w-14 h-14 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                  </svg>
                  <h3 class="text-lg font-semibold text-gray-700">Aucun pigeon disponible</h3>
                  <p class="text-sm text-gray-500 mt-1 max-w-md">
                    Il semble qu'aucun pigeon ne soit actuellement en vente.
                  </p>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Pagination -->
      <app-pagination
        [currentPage]="currentPage"
        [totalPages]="totalPages"
        [isLastPage]="isLastPage"
        (pageChange)="onPageChange($event)"
      ></app-pagination>
    </div>
  </div>
</div>